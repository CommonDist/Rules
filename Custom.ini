# ==============================================================
#
#   Mihomo é«˜çº§è®¢é˜…è½¬æ¢æ¨¡æ¿ (CommonDist ç²¾ç»†æ¨¡å¼)
#
#   è§„åˆ™æº: CommonDist/NewRules (å·²é‡‡ç”¨å­ç›®å½•ç²¾ç»†è§„åˆ™)
#   è¯´æ˜:
#     - å¼•ç”¨å­ç›®å½•ä¸‹çš„ç»†åˆ†è§„åˆ™ï¼Œå®ç°äº†å¯¹ä¸åŒåº”ç”¨ç±»å‹çš„ç²¾ç¡®åˆ†æµï¼›
#     - å¼•ç”¨åŒ…ç½—ä¸‡è±¡çš„ PROXY.list å…œåº•ã€‚
#
# ==============================================================

# æ¨¡æ¿å ä½ç¬¦
proxy-providers:
  main-subscription:
    type: http
    url: "URL_PLACEHOLDER"
    interval: 86400 # 24å°æ—¶æ›´æ–°ä¸€æ¬¡
    path: ./proxies/main.yaml
    health-check:
      enable: true
      interval: 600 # 10åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
      url: https://www.gstatic.com/generate_204

https://github.com/CommonDist

authentication:
  - Clash:cCwPyb83


# -------------------------------------------------------
# ç­–ç•¥ç»„å®šä¹‰ (æ ¸å¿ƒåŠ¨æ€åˆ†ç»„é€»è¾‘ï¼Œéå¸¸å¼ºå¤§)
# -------------------------------------------------------

proxy-groups:

  - name: "ğŸš€ PROXY"
    type: select
    proxies: ["â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "â›‘ï¸ æ•…éšœè½¬ç§»", "âš–ï¸ è´Ÿè½½å‡è¡¡", "ğŸ‡ºğŸ‡¸ ç¾å›½", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡", "ğŸ‡­ğŸ‡° é¦™æ¸¯", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬", "ğŸ‡¹ğŸ‡¼ å°æ¹¾", "ğŸŒ å…¶ä»–åœ°åŒº"]

  # --- åŠŸèƒ½æ€§åˆ†ç»„ ---

  - name: "âš–ï¸ è´Ÿè½½å‡è¡¡"
    type: load-balance
    strategy: consistent-hashing # ç­–ç•¥: ç¡®ä¿åŒä¸€åŸŸåå§‹ç»ˆå‘½ä¸­åŒä¸€èŠ‚ç‚¹ï¼Œä»¥ç»´æŒä¼šè¯ç¨³å®š
    url: https://www.gstatic.com/generate_204 # å¥åº·æ£€æŸ¥ï¼Œç”¨äºå‰”é™¤ä¸å¯ç”¨çš„èŠ‚ç‚¹
    interval: 120
    use: [main-subscription] # ä½¿ç”¨è®¢é˜…ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œè´Ÿè½½å‡è¡¡
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½"
      - "ğŸ‡³ğŸ‡± è·å…°"
      - "ğŸ‡¯ğŸ‡µ æ—¥æœ¬"
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯"
      - "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡"

  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 120
    use: [main-subscription]

  - name: "â›‘ï¸ æ•…éšœè½¬ç§»"
    type: fallback
    url: https://www.gstatic.com/generate_204
    interval: 120
    use: [main-subscription]

  # --- åŠ¨æ€åŒºåŸŸåˆ†ç»„ ---

  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½"
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 120
    use: [main-subscription]
    filter: "(?i)ğŸ‡ºğŸ‡¸|\bUS\b|United States|ç¾å›½|ç¾"

  - name: "ğŸ‡³ğŸ‡± è·å…°"
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 120
    use: [main-subscription]
    filter: "(?i)ğŸ‡³ğŸ‡±|NL|Netherlands|è·å…°|è·"

  - name: "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡"
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 120
    use: [main-subscription]
    filter: "(?i)ğŸ‡¸ğŸ‡¬|SG|Singapore|æ–°åŠ å¡|å¡"

  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬"
    type: url-test
    url: http://www.google.co.jp/generate_204
    interval: 120
    use: [main-subscription]
    filter: "(?i)ğŸ‡¯ğŸ‡µ|JP|Japan|æ—¥æœ¬|æ—¥"

  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯"
    type: url-test
    url: http://www.google.com.hk/generate_204
    interval: 120
    use: [main-subscription]
    filter: "(?i)ğŸ‡­ğŸ‡°|HK|Hong Kong|é¦™æ¸¯|æ¸¯"

  - name: "ğŸ‡¹ğŸ‡¼ å°æ¹¾"
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 120
    use: [main-subscription]
    filter: "(?i)ğŸ‡¹ğŸ‡¼|TW|Taiwan|å°æ¹¾|è‡ºæ¹¾|å°"

  - name: "ğŸŒ å…¶ä»–åœ°åŒº"
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 120
    use: [main-subscription]
    filter: "(?i)^(?!.*(\bUS\b|United States|ç¾å›½|ç¾|SG|Singapore|æ–°åŠ å¡|å¡|TW|Taiwan|å°æ¹¾|è‡ºæ¹¾|å°|HK|Hong Kong|é¦™æ¸¯|æ¸¯|JP|Japan|æ—¥æœ¬|æ—¥|NL|Netherlands|è·å…°|è·)).*$"

  # --- ä¸šåŠ¡åˆ†æµç»„ ---

  - name: Block
    type: select
    proxies: [REJECT, DIRECT]

  - name: NTP
    type: select
    proxies: [DIRECT, "ğŸš€ PROXY", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"]

  - name: AI
    type: select
    proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½", "â›‘ï¸ æ•…éšœè½¬ç§»", "ğŸš€ PROXY"]

  - name: Google
    type: select
    proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½", "â›‘ï¸ æ•…éšœè½¬ç§»", "ğŸš€ PROXY"]

  - name: Youtube
    type: select
    proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "â›‘ï¸ æ•…éšœè½¬ç§»", "ğŸš€ PROXY", DIRECT]

  - name: GitHub
    type: select
    proxies: ["â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "â›‘ï¸ æ•…éšœè½¬ç§»", "ğŸš€ PROXY", DIRECT]

  - name: Telegram
    type: select
    proxies: ["ğŸ‡ºğŸ‡¸ ç¾å›½", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"]

  - name: Apple
    type: select
    proxies: [DIRECT, "ğŸš€ PROXY"]

  - name: Microsoft
    type: select
    proxies: ["ğŸš€ PROXY", DIRECT]

  - name: "ğŸ“º Streaming"
    type: select
    proxies: ["â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "â›‘ï¸ æ•…éšœè½¬ç§»", "ğŸš€ PROXY", DIRECT]

  - name: Games
    type: select
    proxies: ["â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "â›‘ï¸ æ•…éšœè½¬ç§»", "ğŸš€ PROXY", DIRECT]

  - name: CustomProxy
    type: select
    proxies: ["ğŸš€ PROXY", DIRECT]

  - name: ç›´è¿ä¼˜å…ˆ
    type: select
    proxies: [DIRECT, "ğŸš€ PROXY"]

  - name: å›½å¤–
    type: select
    proxies: ["ğŸš€ PROXY", DIRECT]

  - name: å›½å†…
    type: select
    proxies: [DIRECT, "ğŸš€ PROXY"]

  - name: å…¶ä»–
    type: select
    proxies: ["ğŸš€ PROXY", DIRECT]

rules:
  # 1. å±€åŸŸç½‘ä¸ä¿ç•™åœ°å€è§„åˆ™ (å¿…é¡»æ”¾åœ¨æœ€å‰é¢)
  - IP-CIDR,0.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,169.254.0.0/16,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,224.0.0.0/4,DIRECT,no-resolve
  - IP-CIDR,240.0.0.0/4,DIRECT,no-resolve
  - IP-CIDR6,::1/128,DIRECT,no-resolve
  - IP-CIDR6,fc00::/7,DIRECT,no-resolve
  - IP-CIDR6,fd00::/8,DIRECT,no-resolve
  - IP-CIDR6,fe80::/10,DIRECT,no-resolve
  - IP-CIDR6,ff00::/8,DIRECT,no-resolve

  # NTP æœåŠ¡æœ€é«˜ä¼˜å…ˆçº§
  - RULE-SET,NTP,NTP

  # 2. å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,AdBlock,Block
  - RULE-SET,App-Activation,Block

  # 3. ç§æœ‰ & ç›´è¿
  - RULE-SET,Private,DIRECT
  - RULE-SET,Direct,å›½å†…

  # 4. ç²¾ç»†åŒ–åˆ†æµ (é«˜ä¼˜å…ˆçº§)
  - GEOIP,CN,DIRECT # GEOIP ä½œä¸ºè¡¥å……
  - GEOSITE,apple-cn,DIRECT                 # ç›´è¿è‹¹æœä¸­å›½åŒºæœåŠ¡
  - RULE-SET,AI,AI
  - RULE-SET,Google,Google
  - RULE-SET,GoogleDomianï¼ŒGoogle
  - RULE-SET,GitHubï¼ŒGitHub
  - RULE-SET,Youtubeï¼ŒYoutube
  - RULE-SET,Microsoftï¼ŒMicrosoft
  - RULE-SET,CustomProxy,CustomProxy
  - RULE-SETï¼ŒCustomDiectï¼Œç›´è¿ä¼˜å…ˆ
  - GEOSITE,telegram,Telegram

  # 5. èšåˆè§„åˆ™åˆ†æµï¼ˆæµåª’ä½“ & æ¸¸æˆï¼‰
  - RULE-SET,GlobalMedia,ğŸ“º Streaming
  - RULE-SET,Game,Games

  # 6. é€šç”¨ä»£ç†åå¤‡è§„åˆ™ (åŒ…ç½—ä¸‡è±¡)
  - RULE-SET,PROXY,å›½å¤–

  # 7. æœ€ç»ˆåŒ¹é…
  - MATCH,å…¶ä»–

# ==========================================
# YAML Anchors (Templates) è§„åˆ™å¼•æ“ & è§„åˆ™é›†
# ==========================================

rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: text}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: text}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}

rule-providers:
  # --- ç§æœ‰åœ°å€è§„åˆ™ ---
  Private: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/private.txt", path: "./rules/Private.yaml"}

  # --- ç›´è¿è§„åˆ™ ---
  Direct: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt", path: "./rules/Direct.yaml"}

  # --- å¹¿å‘Šå±è”½ ---
  AdBlock: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt", path: "./rules/Adblock.yaml"}
  
  #App-Activation
  App-Activation: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/main/Data/App-Activation.list", path: "./rules/App-Activation.yaml"}

  # ===========================
  # PROXY/ ç²¾ç»†åŒ–è§„åˆ™ (æŒ‰éœ€å¼•ç”¨)
  # ===========================
  NTP: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/main/Data/NTP.list", path: "./rules/NTP.yaml"}
  AI: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/main/Data/AI.list", path: "./rules/AI.yaml"}
  Google: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/google.txt", path: "./rules/Google.yaml"}
  GoogleDomian: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/refs/heads/main/Data/GoogleDomian.list", path: "./rules/GoogleDomian.yaml"}
  GitHub: {<<: *class, url: "https://raw.githubusercontent.com/CommonDist/NewRules/master/PROXY/Github.list", path: "./rules/Github.yaml"}
  Youtube: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/main/Data/YouTube.list", path: "./rules/YouTube.yaml"}
  Apple: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/apple.txt", path: "./rules/Apple.yaml"}
  Microsoft: {<<: *class, url: "https://raw.githubusercontent.com/CommonDist/NewRules/master/Microsoft.list", path: "./rules/Microsoft.yaml"}
  GlobalMedia: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt", path: "./rules/GlobalMedia.yaml"}
  Game: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/main/Data/Game.list", path: "./rules/Game.yaml"}

  # --- è‡ªå®šä¹‰ç»´æŠ¤åˆ—è¡¨ ---
  CustomProxy: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/main/Data/CustomProxy.list", path: "./rules/CustomProxy.yaml"}
  CustomDiect: {<<: *domain, url: "https://raw.githubusercontent.com/CommonDist/Rules/main/Data/CustomDiect.list", path: "./rules/CustomDiect.yaml"}

  # --- æ ¹ç›®å½•æ ¸å¿ƒè§„åˆ™ ---
  PROXY: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt", path: "./rules/Proxy.yaml"}
